<%layout("/eeda/layout.html"){%>
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active" >
                            <a href="#unselected" data-toggle="tab" id="notReconciled">应收未对账明细</a>
                        </li>
                        <li role="presentation">
                            <a href="#charge_check_order" data-toggle="tab" id="reconciled">应收对账单列表</a>
                        </li>
                    </ul>

               <div class="tab-content">
                   <div role="tabpanel" class="tab-pane fade active in" id="unselected">
                       <div class="row simple_search_div">
			        	 <div class="panel panel-default">
			            	<div class="panel-heading">
			                       <h4 class="panel-title">
			                       	   <span style="color:#AAAAAA;padding-left:10px" >* 注：请输入查询条件获取已确认的费用明细数据，其中结算公司为必填 </span>
			                           <a data-toggle="collapse" data-parent="#accordion" href="#collapseChargeInfo" aria-expanded="false" class="collapsed" style="margin-left:650px;">
			                           <i id="collapseChargeIcon" class="fa fa-angle-double-down"></i> 查询条件 </a>
			                       </h4>
			                 </div>
			          <div id="collapseChargeInfo" class="panel-collapse collapse in" aria-expanded="false" style="height: auto;">
			              <div class="panel-body" id="ChargeDiv">
                            	<div class="col-lg-12">
                                 <form id="orderForm">
                                    <div class="row">
                                        <div class="col-lg-4 guide_target1">
                                            <%include("/eeda/component/form/inputSpField.html", 
                                                {
                                                    id:'sp', 
                                                    label:'结算公司',
                                                    list:'list', 
                                                    value: '',
                                                    required: 'required'
                                            }){} %>
                                        </div>
                                        <div class="col-lg-4">
                                            <%include("/eeda/component/form/inputField.html", 
                                                {   id: 'order_no', 
                                                    label: '工作单号', 
                                                    value: ''
                                                }){}%>
                                        </div>            
                                        <div class="col-lg-4">
		                                         <%include("/eeda/component/form/inputDateQueryField.html", 
				                                         {   id:'order_export_date', 
				                                             label:'出货日期'
				                                         }){} %>
                                        </div>                              
                                     </div>       
                                     <div class="row">  
                                         <div class="col-lg-4">
                                                <%include("/eeda/component/form/inputCustomerField.html", 
                                                         {   id: 'customer', 
                                                             label: '客户', 
                                                             value: ''
                                                         }){}%>
                                         </div>
	                                     <div class="col-lg-4">
                                         	<%include("/eeda/component/form/selectField.html", 
                                               {   id:'type', 
                                                   label:'类型', 
                                                   value_list:[
                                                       {code:'', value:''},
                                                       {code:'出口柜货', value:'出口柜货'},
		                                               {code:'进口柜货', value:'进口柜货'}, 
		                                               {code:'出口散货', value:'出口散货'},
		                                               {code:'进口散货', value:'进口散货'},
		                                               {code:'出口空运', value:'出口空运'},
		                                               {code:'进口空运', value:'进口空运'},
		                                               {code:'内贸海运', value:'内贸海运'},
		                                               {code:'香港头程', value:'香港头程'},
		                                               {code:'香港游', value:'香港游'},
		                                               {code:'陆运', value:'陆运'},
		                                               {code:'报关', value:'报关'},
		                                               {code:'快递', value:'快递'},
		                                               {code:'加贸', value:'加贸'},
		                                               {code:'贸易', value:'贸易'},
		                                               {code:'园区游', value:'园区游'}
                                                   ]
                                               }){}%>
                                         </div>
	                                     <div class="col-lg-4">
                                         	<%include("/eeda/component/form/selectField.html", 
                                               {   id:'container_type', 
                                                   label:'箱型（海运）', 
                                                   value_list:[
                                                       {code:"", value:""},
                                                       {code:"20'GP", value:"20GP"},
		                                               {code:"40'GP", value:"40GP"}, 
		                                               {code:"40'HQ", value:"40HQ"},
		                                               {code:"45'GP", value:"45GP"}
                                                   ]
                                               }){}%>
                                         </div>
									</div>
                                    <div class="row">  
	                                     <div class="col-lg-4">
	                                           <%include("/eeda/component/form/inputField.html", 
	                                               {   id:'mbl_no', 
	                                                   label:'MBL号码', 
	                                                   value:''
	                                               }){}%>
                                        </div>
                                        <div class="col-lg-4">
                                                 <%include("/eeda/component/form/inputPortField.html", 
                                                       {   id:'pol', 
                                                           label:'启运港 POL', 
                                                           value:shipment.pol!''
                                                       }){}%>
                                        </div>  
                                        <div class="col-lg-4">
		                                        <%include("/eeda/component/form/inputPortField.html", 
								                       {   id:'pod', 
								                           label:'目的港 POD', 
								                           value:shipment.pod!''									                          
								                       }){}%>
								        </div>
                                    </div>
                                    <div class="form-group button-bar" >
	                                	<button id="searchBtn" class="btn btn_grey" type="button">查询</button>
	                                	<button id="resetBtn" class="btn btn_white" type="button">清空条件</button>
		                                	
                                      	<button id="createBtn" disabled type="button" class="btn btn_green guide_target4" >创建对账单</button>
                                      	<input type="checkbox" name="checkOrderAll" id="checkOrderAll" value="Y">查看应收应付<span style="color:red">(红色为应付)</span>
                                      	<span style="background-color:#ffff66;float:right">底色为橙色代表对账金额与合同价存在差异</span>
		                            </div>
                                </form>
                               </div>
							</div>
						</div>
					</div>
                            
                                <div class="col-lg-12">
                                	<form id="billForm" action="/chargeCheckOrder/create" method="post">
                                		<input id="idsArray" name="idsArray" type="hidden">
                                		<input id="totalAmount" name="totalAmount"  type="hidden">
                                		<input id="cny_totalAmount" name="cny_totalAmount"  type="hidden">
                                		<input id="usd_totalAmount" name="usd_totalAmount"  type="hidden">
                                		<input id="hkd_totalAmount" name="hkd_totalAmount"  type="hidden">
                                		<input id="jpy_totalAmount" name="jpy_totalAmount"  type="hidden">
                                        <input id="exchange_totalAmount" name="exchange_totalAmount"  type="hidden">
                                        <input id="exchange_cny_totalAmount" name="exchange_cny_totalAmount"  type="hidden">
                                        <input id="exchange_usd_totalAmount" name="exchange_usd_totalAmount"  type="hidden">
                                        <input id="exchange_hkd_totalAmount" name="exchange_hkd_totalAmount"  type="hidden">
                                        <input id="exchange_jpy_totalAmount" name="exchange_jpy_totalAmount"  type="hidden">
                                		
                                    </form>
                                    <b class="guide_target2">对账总额：</b>
									<span class="badge" style='margin-top:12px;'> CNY总额: <span id="cny_totalAmountSpan">0.00</span></span>&nbsp;&nbsp;
									<span class="badge" style='margin-top:12px;'> USD总额: <span id="usd_totalAmountSpan">0.00</span></span>&nbsp;&nbsp;
									<span class="badge" style='margin-top:12px;'> HKD总额: <span id="hkd_totalAmountSpan">0.00</span></span>&nbsp;&nbsp;
									<span class="badge" style='margin-top:12px;'> JPY总额: <span id="jpy_totalAmountSpan">0.00</span></span>&nbsp;&nbsp;
                                    <br/>
                                    <b class="guide_target3">结算总额：</b>
                                    <span class="badge" style='margin-top:12px;'> CNY总额: <span id="exchange_cny_totalAmountSpan">0.00</span></span>&nbsp;&nbsp;
                                    <span class="badge" style='margin-top:12px;'> USD总额: <span id="exchange_usd_totalAmountSpan">0.00</span></span>&nbsp;&nbsp;
                                    <span class="badge" style='margin-top:12px;'> HKD总额: <span id="exchange_hkd_totalAmountSpan">0.00</span></span>&nbsp;&nbsp;
                                    <span class="badge" style='margin-top:12px;'> JPY总额: <span id="exchange_jpy_totalAmountSpan">0.00</span></span>&nbsp;&nbsp;
								</div>
							</div>
						
                       	   <div class="row simple_list_div">
                               <%include("/eeda/component/form/detailTable.html", 
                                        {
                                            id:'uncheckedEeda-table', 
                                            style: 'width:2500px',
                                            headers:['<input type="checkbox" id="allCheck">','工作单号','出货时间','创建时间','类型','费用名称','客户','结算公司',
                                             '对账金额','对账币制','对人民币汇率','总金额(CNY)','结算币制','结算汇率','结算金额',
                                             'FND', '体积(CBM)', '箱量', '净重重量', 'REF_NO', 'MBL_NO','HBL_NO','柜号','车型'
                                            ]
                                        }){} %>
                           </div>
                        </div>
                        
                  <div role="tabpanel" class="tab-pane fade in" id="charge_check_order">
                  <div class="row simple_search_div">
                <div class="panel panel-default">
                    <div class="panel-heading">
                    	<div class="row"><!--  第1行  -->
                        	<div class="three_tab"><!--  三列排版  -->
                        		<nobr>
	                            	<div class="search_single">
	                              		<select id="selected_field" name="selected_field" class="form-control search-label">
	                              			<option value="sp_name">结算公司</option>
	                              			<option value="order_no">对账单号</option>
		                                	<option value="toStatus_equals">状态</option>
		                                	<option value="create_stamp">创建时间</option>
		                                	<option value="check_time_slot_between">对账时间段(包含)</option>	
	                            		</select>
	
										<div  style="position:absolute;left:34%;bottom:-5px;" id="sp_name_show">
	                                            <%include("/eeda/component/form/inputSpField.html", 
	                                                                {   id: 'single_sp_name', 
	                                                                    style:'width:150%',
	                                                                    value: ''
	                                                                }){}%>
	                                    </div>
	                            		<input type="text" class="form-control search-control" id="single_order_no1" style="display: none;">
	                                    <select id="single_status" class="form-control search-control" style="display: none;">
			    											<option></option>
			    											<option value="新建">新建</option>
			    											<option value="已确认">已确认</option>
			    											<option value="收款申请中">收款申请中</option>
			    											<option value="已收款">已收款</option>
			    		                                    <option value="坏账款">坏账款</option>
			    						</select>
	                                    <div style="display: none;position:absolute;left:34%;bottom:-5px;" id="create_stamp1_show">
			                                        <%include("/eeda/component/form/inputDateQueryField.html", 
									                                        {   id:'single_create_stamp1',
									                                            style:'width:120%',
									                   							begin_style:'width:30%',
									                   							end_style:'width:30%', 
									                                            value:''
									                                        }){} %>
			                           </div>
			                           <div style="display: none;position:absolute;left:34%;bottom:-5px;" id="check_time_slot_show">
				                           <%include("/eeda/component/form/dateInputField.html",
							                     		{	id:'single_check_time_slot',
							                     		style:'width:100%',
							                     			value:''
							                     		}){} %>
						               </div>
	                          		</div>
                          		</nobr>
                      		</div>
                      <div class="three_tab"><!--  三列排版  -->
                          <div class="search_single">
                            <nobr>
                            <button id="singleSearchBtn" class="btn btn_grey" type="button">查询</button>
                            <a href="/chargeRequest/create" class="btn btn_green" type="button" >创建申请单</a>
                            </nobr>
                          </div>
                          
                      </div>
                      <div class="three_tab"><!--  三列排版  -->
                          <h4 class="panel-title pull-right" style="padding-top: 5px;">
                              <a data-toggle="collapse" data-parent="#accordion" href="#collapseChargeInfo1" aria-expanded="false" class="complex_search collapsed">
                                <i id="collapseChargeIcon1" class="fa fa-angle-double-down"></i> 查询条件
                              </a>
                          </h4>
                      </div>
                  </div>
                  
              </div>
                    <div id="collapseChargeInfo1" class="panel-collapse collapse" aria-expanded="false" style="height: auto;">
                        <div class="panel-body" id="ChargeDiv">
                            <div class="col-lg-12">
                                <form id=orderSearchForm>
                                    <div class="row">
		                                 <div class="col-lg-4">
		                                    <%include("/eeda/component/form/inputSpField.html", 
						                    {   
						                        id:'sp1',
						                        label:'结算公司'
						                    }){}%>
		                                    </div>
		                                    <div class="col-lg-4">
		                                        <%include("/eeda/component/form/inputField.html", 
			                                {   
			                                    id:'order_no1', 
			                                    label:'对帐单号', 
			                                    value:order.order_no!''
			                              }){}%>
		                                    </div>  
		                                     <div class="col-lg-4">
		                                        <%include("/eeda/component/form/selectField.html", 
		                                            {   id:'status', 
		                                                label:'状态', 
		                                                value_list:[
		                                                    {code:'', value:''},
		                                                    {code:'新建', value:'新建'},
		                                                    {code:'已确认', value:'已确认'},
		                                                    {code:'收款申请中', value:'收款申请中'},
		                                                    {code:'已收款', value:'已收款'},
		                                                    {code:'坏账款', value:'坏账款'}
		                                                ]
		                                            }){}%>
		                                    </div>
		                                </div>
                                    <div class="row">
		                                    <div class="col-lg-4">
		                                        <%include("/eeda/component/form/inputDateQueryField.html", 
		                                        {    id:'create_stamp1', 
		                                             label:'创建时间', 
		                                             value:''
		                                           }){} %>
		                                    </div>  
		                                    <div class="col-lg-4">   
		                                    	<%include("/eeda/component/form/dateInputField.html",
						                     		{	id:'check_time_slot',
						                     			label:'对账时间段(包含)',
						                     			value:''
						                     		}){} %>
		                     				</div>
		                     				<div class="col-lg-4">   
		                                    	<%include("/eeda/component/form/inputDateQueryField.html",
						                     		{	id:'check_time',
						                     			label:'对账时间段',
						                     			value:''
						                     		}){} %>
		                     				</div>   
		                                </div><!-- /.row-->
                                    <div class="form-group button-bar" >
                                        <button id="searchBtn1" class="btn btn_grey" type="button">查询</button>
                                        <button id="resetBtn1" class="btn btn-default btn-sm" type="button">清空条件</button>
                                        <a href="/chargeRequest/create" class="btn btn_green" type="button" >创建申请单</a>
                                    </div>
                                </form>
                            </div>
                        </div>
                   </div>
                </div>
            </div>
                         <div class="row simple_list_div">
                                <%include("/eeda/component/form/detailTable.html", 
	                              {   
	                                  id:'eeda-tableChecked',
	                                  style:'width:100%',
	                                  headers:[
	                                      '对账单号',
	                                      '创建时间',			                                       
	                                      '单据状态',
	                                      '结算公司',
	                                      '对账时间段',
	                                      '总收入(CNY)',
	                                      '收入(CNY)',
	                                      '收入(USD)',
	                                      '收入(JPY)',
	                                      '收入(HKD)'
	                                  ]
	                              }){} %>  
	                     </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<%}%>

<%include("/eeda/arap/ChargeCheckOrder/guide.html",{}){} %>

<script>
    requirejs(['/js/common.js', '/js/eeda/eeda-common.js'], function (common) {
        requirejs(['app/arap/ChargeCheckOrder/list', 'app/arap/ChargeCheckOrder/checkedList']);
    });
</script>
