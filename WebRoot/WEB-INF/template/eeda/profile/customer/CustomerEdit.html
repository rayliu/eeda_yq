<%layout("/eeda/layout.html"){%>
<link rel="stylesheet" href="/js/lib/jQuery-File-Upload-9.9.3/css/jquery.fileupload.css">

 <div id="page-wrapper">
    
    <div class="row">
        <div class="col-lg-12 panel-body">

        </div>
        <!-- /.col-lg-12 -->
    </div>

    <div class="row">
                <div class="col-lg-13">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            客户基本信息
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <form id="customerForm" role="form" action="/customer/save" method="post">
                                    <input id="partyId" name="party_id" type="hidden" value="${party.id!''}">
                                    <!-- /.col-lg-6 (odd) 奇数列 -->
                                    
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>代码</label>
                                                <input class="form-control" id="code" type="text" name="code" value="${party.code!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>助记码(拼音首字母)</label>
                                                <input  class="form-control" id="quick_search_code" name="quick_search_code" type="text" value="${party.quick_search_code!''}" required>
                                            </div>                                     
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>公司简称(必填)</label>
                                                <input  class="form-control" id="abbr" name="abbr" type="text" value="${party.abbr!''}" required>
                                            </div>                                     
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>公司英文名称</label>
                                                <input  class="form-control" id="company_name_eng" name="company_name_eng" type="text" value="${party.company_name_eng!''}">
                                            </div>                                     
                                        </fieldset>
                                    </div>
                                    
                              </div>
                           <div class="row"> 
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>公司中文名称(必填)</label>
                                                <input  class="form-control" id="company_name" name="company_name" type="text" value="${party.company_name!''}" required>
                                            </div>                                     
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>英文地址</label>
                                                <input  class="form-control" id="address_eng" type="text" name="address_eng" value="${party.address_eng!''}">
                                            </div>                                     
                                        </fieldset>
                                    </div>
                                    
                              </div>
							  <div class="row"> 
                                    <!-- /.col-lg-6 (even) 偶数列-->                                  
                                     <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>中文地址</label>
                                                <input  class="form-control" id="address" type="text" name="address" value="${party.address!''}">
                                            </div>                                     
                                        </fieldset>
                                    </div>   
									<div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <%include("/eeda/component/form/selectField.html", 
							                                {   id:'company_type', 
							                                    label:'企业类型', 
							                                    value:party.company_type!'',
							                                    class:'form-control', 
							                                    value_list:[
							                                    	{code:'', value:''},
							                                        {code:'生产', value:'生产'},
							                                        {code:'贸易', value:'贸易'}
							                                    ]
							                                }){}%>
                                            </div>                                     
                                        </fieldset>
                                    </div>
                                    <!-- /.col-lg-6 (odd) 奇数列 -->
                                                                         
                                    
                                    <!-- /.col-lg-6 (even) 偶数列 -->
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>联系人</label>
                                                <input class="form-control" id="contact_person" type="text" name="contact_person" value="${party.contact_person!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>联系人(英文)</label>
                                                <input class="form-control" id="contact_person_eng" type="text" name="contact_person_eng" value="${party.contact_person_eng!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    
                                    <!-- /.col-lg-6 (odd) 奇数列 -->
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>联系人电话</label>
                                                <input class="form-control" id="phone" type="text" name="phone" value="${party.phone!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>视屏通话帐号(skype)</label>
                                                <input class="form-control" id="skype" type="text" name="skype" value="${party.skype!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>邮箱</label>
                                                <input  class="form-control " id="email" type="text" name="email" value="${party.email!''}">
                                            </div>                                     
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>传真</label>
                                                <input  class="form-control " id="fax" type="text" name="fax" value="${party.fax!''}">
                                            </div>                                     
                                        </fieldset>
                                    </div>

									<div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>开票单位</label>
                                                <input class="form-control" id="receipt" type="text" name="receipt" value="${party.receipt!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>收款方式</label>
	                                           	<select class="form-control" id="payment" name="payment">
	                                           		<option value="monthlyStatement"  <%if(party.payment!''=='monthlyStatement'){ %>selected<%}%>>月结</option>
	                                           		<option value="freightCollect"  <%if(party.payment!''=='freightCollect'){ %>selected<%}%>>到付</option>
	                                           		<option value="cashPayment" <%if(party.payment!''=='cashPayment'){ %>selected<%}%>>现付</option>
	                                           	</select>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>计费方式</label>
	                                         	<input type="hidden" value="${party.charge_type!''}" id="chargeTypeSelect">
	                                           	<select class="form-control" id="chargeType" name="chargeType">
	                                           		<option value="perUnit">计件</option>
	                                           		<option value="perCar">整车</option>
	                                           		<option value="perCargo">零担</option>
	                                           	</select>
                                            </div>
                                        </fieldset>
                                    </div>
                                    
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>保险费率</label>
                                                <input class="form-control" id="insurance_rates" name="insurance_rates" type="text" value="${party.insurance_rates!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>重点客户提醒（根据一段时间内没有出现在工作单进行提醒）</label>
	                                           	<select class="form-control" id="customer_remind" name="customer_remind">
	                                           		<option></option>
	                                           		<option value="7" <% if(party.customer_remind!''=='7'){%>selected<%}%>>七天</option>
	                                           		<option value="15"<% if(party.customer_remind!''=='15'){%>selected<%}%>>十五天</option>
	                                           		<option value="30"<% if(party.customer_remind!''=='30'){%>selected<%}%>>三十天</option>
	                                           		<option value="90"<% if(party.customer_remind!''=='90'){%>selected<%}%>>九十天</option>
	                                           		<option value="180"<% if(party.customer_remind!''=='180'){%>selected<%}%>>一百八十天</option>
	                                           		<option value="360"<% if(party.customer_remind!''=='360'){%>selected<%}%>>三百六十天</option>
	                                           	</select>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>商检企业备案号</label>
                                                <input class="form-control" id="registration" type="text" name="registration" value="${party.registration!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>海关备案号</label>
                                                <input class="form-control" id="custom_registration" type="text" name="custom_registration" value="${party.custom_registration!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>邮编</label>
                                                <input class="form-control" id="zip_code" type="text" name="zip_code" value="${party.zip_code!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>公司简介</label>
												<textarea class="form-control" rows="5"  id="introduction" name="introduction">${party.introduction!''}</textarea>
                                            </div>
                                        </fieldset>
                                    </div>
                                    
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>备注</label>
												<textarea class="form-control" rows="5" id="remark" name="remark">${party.remark!''}</textarea>
                                            </div>
                                        </fieldset>
                                    </div>
								</form>       
                            </div>

             <div class="col-lg-12" style="margin-top:15px;">
               <label>公司地址信息</label>
             </div>
             <div class="form-group">
                 <div class="col-lg-12">
                        <form id="Custom_noteForm" style="margin-top:15px;">
                            <button class="btn  btn_green" id="add_cargo" type="button">    添加工厂地点</button> 
                                   <br>
                                   <%include("/eeda/component/form/detailTable.html", 
                                       {
                                           id:'cargo_table',
                                           style:'width:100%',
                                           headers:['','地点名称','地点英文名称', '助记码','所属区域'],
                                           field_list:['id','dock_name','dock_name_eng','quick_search_code','dock_region'],
                                           value_list: itemList![]
                                       }){} %>
                        </form>
                    </div>
            </div>           
                            <!-- /.row (nested) -->
          <div class="row" style="margin-top:15px;">
               <div class="col-lg-12"> 
                <ul  class="nav nav-tabs">
                    <li class="active">
                        <a id='document_info' href="#documentInfo" data-toggle="tab" >文档信息</a>
                    </li>

                     <% if(shiro.hasPermission("customer.transOffer")){%>
                    <li >
                        <a id='customer_quotation' href="#customerQuotation" data-toggle="tab" >客户报价表</a>
                    </li>
                    <%}%>
                </ul>
               </div>
         </div>
         <div class="tab-content">
                <div class="tab-pane fade active in" id="documentInfo">
                    <div class="form-group"> 
                     <div class="col-lg-12"> 
                        <span class="btn btn-success btn-xs fileinput-button" id="fileuploadSpan"> 
                                    <i class="glyphicon glyphicon-plus"></i> 
                                    <span>选择文件</span> 
                                    <input id="fileupload" type="file" name="files[]" multiple> 
                                </span> 
                               
                                <%include("/eeda/component/form/detailTable.html", 
                                    {
                                        id:'doc_table',
                                        headers:['','文档名称', '备注', '上传人', '上传时间'],
                                        field_list:['','doc_name', 'remark','c_name','upload_time'],
                                        value_list: docList![]
                                    }){} %>
                          </div>
                        </div>      
                </div>
                <div class="tab-pane fade " id="customerQuotation">
                    <div class="form-group"> 
                     <div class="col-lg-12"> 
                       <button id="add_customerQuotation" type="button" class="btn btn_blue btn-xs">添加</button>
                               
                                <%include("/eeda/component/form/detailTable.html", 
                                    {
                                        id:'customer_quotation_table',
                                        style:'width:1380px',
                                        headers:[' 操作 ','提柜码头', '装货地点1', '装货地点2', '还柜码头','车型','货柜数量','不含税运费币制','不含税运费','税率','税金','含税运费','备注','','','','',''],
                                        field_list:['','take_wharf','loading_wharf1','loading_wharf2','back_wharf','truck_type','container_volume','currency_id','tax_free_freight','tax_rate','tax','price_tax','remark'
                                            ,'take_address_name','delivery_address_name','loading_wharf1_name','loading_wharf2_name','CURRENCY_NAME'],
                                        value_list: customerQuotationList![]
                                    }){} %>
                          </div>
                        </div> 
                </div>
         </div>

                        <div class="col-lg-12" style="margin-top:15px;">
                           <div class="col-lg-6" style="clear:both;">
                                        <button id="saveBtn" type="button" class="btn  btn-primary">保存</button>
                                        <a class="btn  btn-primary" href="/customer">返回</a>
                                        <a class="btn btn_green" href="/customer/add" style = "float:right">新增客户</a>
                                    </div>
                        </div>

                     </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->      
</div>

<%}%>

<%include("/eeda/component/jsTemplate/tableInputFieldCurrencyId.js",{}){} %>
<%include("/eeda/component/jsTemplate/tableSelectTruckTypeField.js",{}){} %>
<%include("/eeda/component/jsTemplate/tableInputDockInfoField.js",{}){} %>
<%include("/eeda/component/jsTemplate/tableInputField.js",{}){} %>
<script>
var itemOrder={};
 var company_name = '${party.company_name!''}';

if(company_name){
	document.title = company_name +' | '+document.title;
}
</script>
<script>
requirejs(['/js/common.js', '/js/eeda/eeda-common.js'], function (common) {
        requirejs(['app/profile/customer/edit']);
    });
</script>