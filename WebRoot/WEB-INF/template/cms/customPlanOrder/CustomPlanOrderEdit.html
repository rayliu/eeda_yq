<%layout("/eeda/layout.html"){%>
<link rel="stylesheet" href="/js/lib/jQuery-File-Upload-9.9.3/css/jquery.fileupload.css">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <div class="btn-header" style="font-size:32px">报关申请单</div>
                </div>
            </div>
            <input id="order_id" type="hidden" name="order_id" value="${order.id!''}"/>
            <div class="form-group">
                <form id="orderForm">
                    <div class="row"><!--  第1行  --> 
                        <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                                {   id:'order_no', 
                                                    label:'报关申请单号码', 
                                                    value:order.order_no!'',
                                                    disabled: 'disabled'
                                                }){}%>
                        </div>
                        <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                                {   id:'creator_name', 
                                                    label:'创建人', 
                                                    value:user.c_name!'', 
                                                    disabled: 'disabled'
                                                }){}%>
                        </div>
                        <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                                {   id:'create_stamp', 
                                                    label:'创建时间', 
                                                    value:order.create_stamp!'', 
                                                    disabled: 'disabled'
                                                }){}%>
                        </div>                        
                        
                     </div>
                     <div class="row"><!--  第2行  --> 
                       <div class="col-lg-4">
                           <%include("/eeda/component/form/inputField.html", 
                                                {   id:'application_company',
                                                	required:'required', 
                                                    label:'申请企业', 
                                                    value:order.order_no!''
                                                }){}%>
                       </div>
                       <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                                {   id:'date_custom', 
                                                    label:'报关日期', 
                                                    value:order.create_stamp!''
                                                }){}%>
                        </div>
                       <div class="col-lg-4">
                            <%include("/eeda/component/form/selectField.html", 
                                {   id:'type', 
                                    label:'类型', 
                                    required:'required',
                                    value:order.type!'',
                                    value_list:[
                                        {code:'出口', value:'出口'},
                                        {code:'进口', value:'进口'}
                                    ]
                                }){}%>
                        </div><!-- /.col-lg-4 -->
                    </div>
                    <div class="row"><!--  第3行  -->    
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/inputPartyField.html", 
			                    {   id:'carrier',
			                        type:  'carrier',
			                        label: '船公司', 
			                        value: shipment.carrier!planOrderItem.carrier!'',
			                        display_value: shipment.carrier_name!portCreate.carrier_name!''
			                    }){}%>
                         </div>
                        <div class="col-lg-4">
                            <%include("/eeda/component/form/selectField.html", 
                                {   id:'deal_mode', 
                                    label:'成交方式', 
                                    value:order.type!'',
                                    value_list:[
                                        {code:'出口', value:'出口'},
                                        {code:'进口', value:'进口'}
                                    ]
                                }){}%>
                         </div>
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                 {   id:'export_consignee', 
                                     label:'(出口)收货人', 
                                     value:order.create_stamp!'' 
                                 }){}%>
                        </div>
                    </div>
                    <div class="row"><!--  第4行  -->
                       <div class="col-lg-4">
                            <%include("/eeda/component/form/selectField.html", 
                                 {   id:'state', 
                                     label:'状态', 
                                     value:order.create_stamp!'' ,
                                     value_list:[
                                        {code:'新建', value:'新建'},
                                        {code:'已完成报关', value:'已完成报关'}
                                     ]
                                 }){}%>
                        </div>
                    </div>
                    <br><br><br>
                    <div class="row"><!--  第5行  -->    
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/selectField.html", 
                                {   id:'supervise_mode', 
                                    label:'监管方式', 
                                    value:order.type!'',
                                    value_list:[
                                        {code:'出口', value:'出口'},
                                        {code:'进口', value:'进口'}
                                    ]
                                }){}%>
                         </div>
                        <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                {   id:'package_number', 
                                    label:'件数', 
                                    value:order.type!'',
                                    value_list:[
                                        {code:'出口', value:'出口'},
                                        {code:'进口', value:'进口'}
                                    ]
                                }){}%>
                         </div>
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/selectField.html", 
                                 {   id:'package_type', 
                                     label:'包装种类', 
                                     value:order.create_stamp!'',
                                     value_list:[
                                        {code:'出口', value:'出口'},
                                        {code:'进口', value:'进口'}
                                    ] 
                                 }){}%>
                        </div>
                    </div>
                    <div class="row"><!--  第6行  -->    
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                {   id:'export_country', 
                                    label:'(出口)目的国', 
                                    value:order.type!''
                                }){}%>
                         </div>
                        <div class="col-lg-4">
                            <%include("/eeda/component/form/inputPortField.html", 
			                       {   id:'export_port', 
			                           label:'(出口)指运港', 
			                           value:shipment.por!planOrderItem.por!'',
			                           display_value:port.por_name!portCreate.por_name!''
			                       }){}%>
                         </div>
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                 {   id:'so_number', 
                                     label:'S/O No', 
                                     value:order.so_number!''
                                 }){}%>
                        </div>
                    </div>
                    <div class="row"><!--  第7行  -->    
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                {   id:'import_country', 
                                    label:'(进口)启运国', 
                                    value:order.type!''
                                }){}%>
                         </div>
                        <div class="col-lg-4">
                            <%include("/eeda/component/form/inputPortField.html", 
			                       {   id:'import_port', 
			                           label:'(进口)装货港', 
			                           value:shipment.por!planOrderItem.por!'',
			                           display_value:port.por_name!portCreate.por_name!''
			                       }){}%>
                         </div>
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                 {   id:'trade_country', 
                                     label:'贸易国', 
                                     value:order.trade_country!''
                                 }){}%>
                        </div>
                    </div>
                    <br><br>
                    <div class="row"><!--  第8行  -->    
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                {   id:'transport_fee', 
                                    label:'运费', 
                                    value:order.type!''
                                }){}%>
                         </div>
                        <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
			                       {   id:'protect_fee', 
			                           label:'保费', 
			                           value:shipment.por!planOrderItem.por!''
			                       }){}%>
                         </div>
                         <div class="col-lg-4">
                            <%include("/eeda/component/form/inputField.html", 
                                 {   id:'sundry_fee', 
                                     label:'杂费', 
                                     value:order.sundry_fee!''
                                 }){}%>
                        </div>
                    </div>
                </form>
            
            	<div class="form-group">
                 <label>备注</label>
                 <textarea id='note' class="form-control" rows="3" name="note">${order.remark!''}</textarea>
            	</div>
            </div>

			<div class="row" style="margin-top:15px">
				<ul id="orderTabs" class="nav nav-tabs">
					<li class="active">
						<a href="#itemDetail" data-toggle="tab">货品信息</a>
					</li>
				</ul>
				
				<div class="tab-content">
		            <div class="tab-pane fade active in" id="itemDetail">
			            <div class="form-group">
			                <div class="col-lg-12">
			                    <button class="btn btn-success btn-xs" id="add_cargo">添加货品</button> 
                             <!--   <button class="btn btn-success btn-xs" id="create_jobOrder" disabled>创建报关工作单</button> -->
                                <br>
			                    <%include("/eeda/component/form/detailTable.html", 
			                        {
			                            id:'cargo_table',
			                            style:'width:2300px',
			                            headers:['','','商品编号', '商品名称', '规格', '申报要素', '成交数量', '成交单位','法定数量', 
                                                  '法定单位','单价', '总价', '币制', '征免'],
			                            field_list:['id','','commodity_code','commodity_name', 'standard', 'declare_element', 'transaction_number',  'transaction_unit',
			                            'legal_number','legal_unit', 'price','total_price', 'currency', 'exemption'],
			                            value_list: itemList![]
			                        }){} %> 
			                </div>
			            </div>
		            </div>
	            </div>
            </div>
            <br>
            <div class="row">
                <div class="col-lg-12">
                    <a id='saveBtn' class="btn  btn-primary" href="#">保存</a>
                    <button id="confirmCompleted" class="btn btn-primary">确认</button>
                    <a class="btn  btn-default" href="/customPlanOrder">返回</a>
                </div>
            </div><br><br>
            <div class="row">
               <div class="form-group">
               		<h3>文档上传</h3>
					<span class="btn btn-success btn-xs fileinput-button" id="fileuploadSpan"> 
		                <i class="glyphicon glyphicon-plus"></i> 
		                <span>选择文件</span> 
		                <input id="fileupload" type="file" name="files[]" multiple> 
	           	    </span> 
               </div>
            </div>
        </div>
<%}%>
<%include("/eeda/component/jsTemplate/tableInputDateField.js",{}){} %>
<%include("/eeda/component/jsTemplate/tableInputField.js",{}){} %>
<%include("/eeda/component/jsTemplate/tableSelectTruckTypeField.js",{}){} %>

<script>
    var order_no = '${order.order_no!'订单编辑'}'; 
    var salesOrder = {};
</script>
<script>
    requirejs(['/js/common.js', '/js/eeda/eeda-common.js'], function (common) {
        requirejs(['app/cms/customPlanOrder/edit']);
        requirejs(['app/cms/customPlanOrder/edit_item_table']);
        
    });

</script>
