<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="costApplicationBill" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="6dd1be0e-8c7d-4a59-afc1-f2a9a5ba0a8b">
	<property name="ireport.zoom" value="1.3310000000000004"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="Table Dataset 1" uuid="bbb601dc-9fa2-4056-bc3d-c986a039ff9a"/>
	<parameter name="order_id" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
	u.c_name,
	joa.id,
	joa.create_flag,
	joa.sp_id,
	joa.order_type,
	joa.total_amount,
	joa.exchange_rate,
	joa.currency_total_amount,
	jo.order_no order_no,
	jo.create_stamp,
	jo.customer_id,
	jo.volume,
	jo.net_weight,
	jo.type,
	p.abbr sp_name,
	p1.abbr customer_name,
	p.contact_person,
  p.phone phone,
  p.fax,
	jos.mbl_no,
	jos.etd,
	l. NAME fnd,
	joai.destination,
	if(joa.order_type='charge',
	(0-joa.exchange_total_amount),
	joa.exchange_total_amount
	) exchange_total_amount,
	(SELECT IF (
  joa.order_type='cost',
	joa.exchange_total_amount,
	(0 - joa.exchange_total_amount)
) from job_order_arap joa WHERE joa.exchange_currency_id = 6 and joa.id = caol.job_order_arap_id ) usd,
(SELECT IF (
  joa.order_type='cost',
	joa.exchange_total_amount,
	(0 - joa.exchange_total_amount)
) from job_order_arap joa WHERE joa.exchange_currency_id = 3 and joa.id = caol.job_order_arap_id ) cny,
(SELECT IF (
  joa.order_type='cost',
	joa.exchange_total_amount,
	(0 - joa.exchange_total_amount)
) from job_order_arap joa WHERE joa.exchange_currency_id = 8 and joa.id = caol.job_order_arap_id ) jpy,
(SELECT IF (
  joa.order_type='cost',
	joa.exchange_total_amount,
	(0 - joa.exchange_total_amount)
) from job_order_arap joa WHERE joa.exchange_currency_id = 9 and joa.id = caol.job_order_arap_id ) hkd,
acao.begin_time,
acao.end_time,
	GROUP_CONCAT(josi.container_no) container_no,
	GROUP_CONCAT(josi.container_type) container_amount,
	fi. NAME fy_name,
	cur. NAME currency_name,
	ifnull(cur1. NAME, cur. NAME) cur_name,
	ifnull(
		joa.exchange_currency_rate,
		1
	) exchange_currency_rate,
	ifnull(
		joa.exchange_total_amount,
		joa.total_amount
	) exchange_total_amount,
	joa.pay_flag
FROM
	job_order jo
LEFT JOIN job_order_arap joa ON jo.id = joa.order_id
LEFT JOIN fin_item fi ON joa.charge_id = fi.id
LEFT JOIN job_order_shipment jos ON jos.order_id = joa.order_id
LEFT JOIN job_order_shipment_item josi ON josi.order_id = joa.order_id
LEFT JOIN job_order_air_item joai ON joai.order_id = joa.order_id
LEFT JOIN party p ON p.id = joa.sp_id
LEFT JOIN party p1 ON p1.id = jo.customer_id
LEFT JOIN location l ON l.id = jos.fnd
LEFT JOIN currency cur ON cur.id = joa.currency_id
LEFT JOIN currency cur1 ON cur1.id = joa.exchange_currency_id
LEFT JOIN cost_application_order_rel caol ON caol.job_order_arap_id = joa.id
LEFT JOIN arap_cost_application_order acao ON caol.application_order_id = acao.id
LEFT JOIN arap_cost_order aco ON aco.id = caol.cost_order_id
LEFT JOIN user_login u on u.id = acao.create_by
WHERE
	acao.id = $P{order_id}
GROUP BY
	joa.id
ORDER BY
	aco.order_no,
	jo.order_no]]>
	</queryString>
	<field name="c_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="create_flag" class="java.lang.String">
		<fieldDescription><![CDATA[收付申请单创建标记位]]></fieldDescription>
	</field>
	<field name="sp_id" class="java.lang.Long">
		<fieldDescription><![CDATA[供应商id]]></fieldDescription>
	</field>
	<field name="order_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_amount" class="java.lang.Double">
		<fieldDescription><![CDATA[对账金额]]></fieldDescription>
	</field>
	<field name="exchange_rate" class="java.lang.Double">
		<fieldDescription><![CDATA[对人民币汇率]]></fieldDescription>
	</field>
	<field name="currency_total_amount" class="java.lang.Double">
		<fieldDescription><![CDATA[金额（人民币）]]></fieldDescription>
	</field>
	<field name="order_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="create_stamp" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="customer_id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="volume" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="net_weight" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="sp_name" class="java.lang.String"/>
	<field name="customer_name" class="java.lang.String"/>
	<field name="contact_person" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="phone" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fax" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="mbl_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="etd" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fnd" class="java.lang.String"/>
	<field name="destination" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="exchange_total_amount" class="java.lang.Double">
		<fieldDescription><![CDATA[结算金额]]></fieldDescription>
	</field>
	<field name="usd" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cny" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="jpy" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="hkd" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="begin_time" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="end_time" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="container_no" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="container_amount" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fy_name" class="java.lang.String"/>
	<field name="currency_name" class="java.lang.String"/>
	<field name="cur_name" class="java.lang.String"/>
	<field name="exchange_currency_rate" class="java.lang.Double">
		<fieldDescription><![CDATA[结算汇率]]></fieldDescription>
	</field>
	<field name="pay_flag" class="java.lang.String">
		<fieldDescription><![CDATA[收付款确认标记位]]></fieldDescription>
	</field>
	<variable name="SUM_CNY" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{cny}]]></variableExpression>
	</variable>
	<variable name="SUM_USD" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{usd}]]></variableExpression>
	</variable>
	<variable name="SUM_JPR" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{jpy}]]></variableExpression>
	</variable>
	<variable name="SUM_HKD" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{hkd}]]></variableExpression>
	</variable>
	<variable name="PageSize" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[new Integer(1)]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="113" splitType="Stretch">
			<staticText>
				<reportElement x="30" y="12" width="496" height="26" uuid="9f5bc2b4-6067-454d-8506-9f42f0978740"/>
				<textElement textAlignment="Center">
					<font fontName="宋体" size="16" isBold="true" pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[出库单]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="61" width="555" height="1" uuid="8a15dbcd-dc70-4142-991e-aa1b9b132ce3"/>
			</line>
			<staticText>
				<reportElement x="30" y="62" width="57" height="17" uuid="89531926-4ea1-4847-8321-0bc51d393147"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[单号：]]></text>
			</staticText>
			<staticText>
				<reportElement x="30" y="79" width="57" height="17" uuid="0ac388f8-c488-48a1-8a14-583e34277b93"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[创建人：]]></text>
			</staticText>
			<staticText>
				<reportElement x="30" y="96" width="57" height="17" uuid="8952c0cf-caad-419c-9b6a-928f3508f700"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[产品件数：]]></text>
			</staticText>
			<staticText>
				<reportElement x="332" y="62" width="51" height="17" uuid="a63a0493-65aa-4696-8125-e1543feeeec0"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[货品编码：]]></text>
			</staticText>
			<staticText>
				<reportElement x="332" y="79" width="51" height="17" uuid="6e085366-1045-4a4b-a85a-2ab87bfbf12e"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[创建时间：]]></text>
			</staticText>
			<staticText>
				<reportElement x="332" y="96" width="51" height="17" uuid="5667887a-06cb-42f5-a222-33f2b5e2640d"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="383" y="62" width="172" height="18" uuid="22c185b9-ad44-4694-9ffc-1505f13c4e1c"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="383" y="79" width="172" height="18" uuid="41430ddd-5424-48d9-8721-90a238258e4d"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="87" y="62" width="214" height="17" uuid="e649dff3-3baa-4977-adf8-212ae3953cd7"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="87" y="79" width="214" height="17" uuid="92b5b21b-a216-4ab6-8b6c-948047108f4c"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement x="87" y="96" width="214" height="17" uuid="e3b84697-2a4e-4ef2-8429-f9be6c440da3"/>
				<textElement>
					<font pdfEncoding="Cp1252"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="111" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="92" width="77" height="18" uuid="4ddd4e90-7751-4e44-b12b-46f55f57cc20"/>
				<textElement>
					<font fontName="宋体" pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[工作单号]]></text>
			</staticText>
			<staticText>
				<reportElement x="77" y="92" width="52" height="18" uuid="ecc2080e-767d-46a2-8452-93b33174d5c8"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[ETD]]></text>
			</staticText>
			<staticText>
				<reportElement x="129" y="92" width="38" height="18" uuid="f65f26ac-757f-4e3b-b62d-277c5a1529fb"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[订舱号]]></text>
			</staticText>
			<staticText>
				<reportElement x="167" y="92" width="63" height="18" uuid="4c370016-7fcf-4d5d-8d9c-eeae6cc5d1ae"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[提单号]]></text>
			</staticText>
			<staticText>
				<reportElement x="230" y="92" width="32" height="18" uuid="300cbc78-f0da-47ac-b62e-c73cf0da985e"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[类型]]></text>
			</staticText>
			<staticText>
				<reportElement x="262" y="92" width="70" height="18" uuid="a43148fc-c959-4cb6-94ad-9c215b7cf055"/>
				<textElement textAlignment="Center">
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[目的港]]></text>
			</staticText>
			<staticText>
				<reportElement x="385" y="92" width="50" height="18" uuid="a472e387-3284-41b0-bfee-56ce2d1e83f2"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[箱量类型]]></text>
			</staticText>
			<staticText>
				<reportElement x="435" y="92" width="50" height="18" uuid="589d4255-1f47-44da-b919-e1efc98af72f"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[费用名称]]></text>
			</staticText>
			<staticText>
				<reportElement x="485" y="92" width="31" height="18" uuid="bbe3179a-1180-4826-999b-0bfd79e301c7"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[币制]]></text>
			</staticText>
			<staticText>
				<reportElement x="333" y="92" width="52" height="18" uuid="12e555d2-7f8a-41c3-a939-9b89b142e8dd"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[箱号]]></text>
			</staticText>
			<staticText>
				<reportElement x="518" y="92" width="37" height="18" uuid="7041035b-d522-4a52-9cd8-7a7119ea6efe"/>
				<textElement>
					<font pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H"/>
				</textElement>
				<text><![CDATA[金额]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="110" width="555" height="1" uuid="4a044f7f-66a5-46d5-aebb-44ec950fb13f"/>
			</line>
			<line>
				<reportElement x="0" y="91" width="555" height="1" uuid="7d4cd4f3-9ebf-4fdc-b5a2-e99b3edc0883"/>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="21" splitType="Stretch"/>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="72" splitType="Stretch"/>
	</summary>
</jasperReport>
