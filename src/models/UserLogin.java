package models;import org.apache.shiro.SecurityUtils;import org.apache.shiro.subject.Subject;import com.jfinal.plugin.activerecord.Db;import com.jfinal.plugin.activerecord.Model;import com.jfinal.plugin.activerecord.Record;@SuppressWarnings("serial")public class UserLogin extends Model<UserLogin> {	public static final UserLogin dao = new UserLogin();	/**     * user info should stay in session     * @param userName     * @return     */    public static UserLogin getCurrentUser(){        Subject currentUser = SecurityUtils.getSubject();        UserLogin user = null;        if(currentUser.isAuthenticated()){            String userName = currentUser.getPrincipal().toString();            user = getUserByName(userName);        }        return user;    }    /**     * user info should stay in session     * @param userName     * @return     */    public static UserLogin getUserByName(String userName){        UserLogin user = UserLogin.dao.findFirst("select * from user_login where user_name='" + userName + "' and (is_stop = 0 or is_stop is null)");        return user;    }        public boolean isAdmin() {        String user_name = this.getStr("user_name");        Record rec = Db.findFirst("select r.name from eeda_user_role ur,eeda_role r where ur.role_id = r.id and ur.user_name=?", user_name);        if("系统管理员".equals(rec.getStr("name"))){            return true;        }else{            return false;        }    }        public long getId(){        return this.getLong("id");    }        public long getOfficeId(){        return this.getLong("office_id");    }}